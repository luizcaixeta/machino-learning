---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection, getEntryBySlug } from "astro:content";

export async function getStaticPaths() {
  const posts = await getCollection("posts");
  return posts.map((post) => ({
    params: { slug: post.slug }
  }));
}

const { slug } = Astro.params;
const post = await getEntryBySlug("posts", slug);

if (!post) {
  throw new Error(`Post n√£o encontrado: ${slug}`);
}

const { Content } = await post.render();
---

<BaseLayout title={post.data.title} variant="post">
  <section class="post-view-section active">
    <div class="post-page-heading">
      <h1 class="post-page-title">{post.data.title}</h1>
      <p class="post-meta">
        {post.data.date.toISOString().slice(0, 10)}
      </p>
    </div>

    <article class="post-content">
      <Content />
    </article>

    <div style="margin-top: 2rem;">
      <a href="/" class="back-btn">[ VOLTAR PARA LISTA ]</a>
    </div>
  </section>

  <section class="contact-section">
    <h2 class="section-title">03. CONNECT</h2>
    <p style="opacity: 0.8; margin-bottom: 1rem;">
      &gt; Initiate communication protocol:
    </p>

    <div class="social-links">
      <a href="mailto:luizfbcaixeta@gmail.com" class="social-btn">
        <svg class="icon-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M22 6C22 4.9 21.1 4 20 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6ZM20 6L12 11L4 6H20ZM20 18H4V8L12 13L20 8V18Z"/>
        </svg>
        EMAIL
      </a>

      <a
        href="https://www.linkedin.com/in/luiz-caixeta/"
        target="_blank"
        rel="noopener noreferrer"
        class="social-btn"
      >
        <svg class="icon-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M19 3A2 2 0 0 1 21 5V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V5A2 2 0 0 1 5 3H19M18.5 18.5V13.2A3.26 3.26 0 0 0 15.24 9.94C14.39 9.94 13.4 10.46 12.92 11.24V10.13H10.13V18.5H12.92V13.57C12.92 12.8 13.54 12.17 14.31 12.17A1.4 1.4 0 0 1 15.71 13.57V18.5H18.5M6.88 8.56A1.68 1.68 0 0 0 8.56 6.88C8.56 5.95 7.81 5.19 6.88 5.19A1.69 1.69 0 0 0 5.19 6.88C5.19 7.81 5.95 8.56 6.88 8.56M8.27 18.5V10.13H5.5V18.5H8.27Z"/>
        </svg>
        LINKEDIN
      </a>

      <a
        href="https://github.com/luizcaixeta"
        target="_blank"
        rel="noopener noreferrer"
        class="social-btn"
      >
        <svg class="icon-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2C6.48 2 2 6.58 2 12.26C2 16.62 4.87 20.26 8.84 21.6C9.34 21.7 9.52 21.41 9.52 21.16C9.52 20.94 9.51 20.33 9.51 19.59C7 20.09 6.35 18.52 6.35 18.52C5.89 17.35 5.2 17.03 5.2 17.03C4.26 16.37 5.27 16.38 5.27 16.38C6.3 16.46 6.84 17.53 6.84 17.53C7.76 19.17 9.32 18.7 9.9 18.46C10 17.76 10.28 17.28 10.6 17.04C8.6 16.8 6.48 16.01 6.48 12.65C6.48 11.62 6.86 10.8 7.5 10.18C7.39 9.94 7.05 8.97 7.59 7.6C7.59 7.6 8.36 7.34 9.51 8.24C10.24 8.02 11.02 7.91 11.8 7.91C12.58 7.91 13.36 8.02 14.09 8.24C15.24 7.34 16.01 7.6 16.01 7.6C16.55 8.97 16.21 9.94 16.1 10.18C16.74 10.8 17.12 11.62 17.12 12.65C17.12 16.02 14.99 16.79 12.99 17.03C13.38 17.34 13.73 17.96 13.73 18.93C13.73 20.29 13.72 21.36 13.72 21.6C13.72 21.85 13.9 22.15 14.41 22.04C18.38 20.26 21.25 16.62 21.25 12.26C21.25 6.58 16.77 2 11.25 2H12Z"/>
        </svg>
        GITHUB
      </a>

      <a
        href="https://twitter.com/machinolearning"
        target="_blank"
        rel="noopener noreferrer"
        class="social-btn"
      >
        <svg class="icon-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M18.901 3H21L14.412 10.53L22.164 21H17.92L11.125 12.112L3.352 21H1.252L8.293 12.946L0.836 3H5.215L11.554 8.572L18.901 3ZM18.165 19.743H19.328L4.852 4.183H3.688L18.165 19.743Z"/>
        </svg>
        X / TWITTER
      </a>
    </div>
  </section>
</BaseLayout>
